metadata:
- description: "\n            This ruleset gives hints for upgrading to quarkus 1.12
    for applications that use Mutiny \n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-javaee,3.0.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,3.0.0.Final
    - id: org.jboss.windup.rules,windup-rules-xml,3.0.0.Final
  sourceTechnology:
  - id: quarkus1
    versionRange: (,11]
  targetTechnology:
  - id: quarkus1
    versionRange: '[12,)'
rules:
  rule:
  - when:
      javaclass:
      - location:
        - IMPORT
        references: io.smallrye.mutiny.Multi
        as: files1
      filecontent:
      - from: files1
        pattern: '{*}.collectItems(){*}'
        as: methods1
    perform:
      iteration:
      - hint:
        - message: "\n                            \n                            Mutiny
            has deprecated a few APIs. The deprecated APIs are still available and
            would work, but are planned for removal.  \n                            Changed
            API is : `Multi.collectItems()` -> `Multi.collect()`\n                            \n
            \                       "
          link:
          - value: ""
            title: Quarkus - Migration Guide 1.12
            href: https://github.com/quarkusio/quarkus/wiki/Migration-Guide-1.12#mutiny
          quickfix:
          - replacement: .collect(
            search: .collectItems(
            type: REPLACE
            name: collectItems
          title: Method Multi.collectItems() deprecated
          category-id: potential
          effort: 1
        over: methods1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: io.smallrye.mutiny.Multi
        as: files2
      filecontent:
      - from: files2
        pattern: '{*}.groupItems(){*}'
        as: methods2
    perform:
      iteration:
      - hint:
        - message: "\n                            \n                            Mutiny
            has deprecated a few APIs. The deprecated APIs are still available and
            would work, but are planned for removal.  \n                            Changed
            API is : `Multi.groupItems()` -> `Multi.group()`\n                            "
          link:
          - value: ""
            title: Quarkus - Migration Guide 1.12
            href: https://github.com/quarkusio/quarkus/wiki/Migration-Guide-1.12#mutiny
          quickfix:
          - replacement: .group(
            search: .groupItems(
            type: REPLACE
            name: groupItems
          title: Method Multi.groupItems() deprecated
          category-id: potential
          effort: 1
        over: methods2
  - when:
      javaclass:
      - location:
        - IMPORT
        references: io.smallrye.mutiny.Multi
        as: files3
      filecontent:
      - from: files3
        pattern: '{*}.toHotStream(){*}'
        as: methods3
    perform:
      iteration:
      - hint:
        - message: "\n                            \n                            Mutiny
            has deprecated a few APIs. The deprecated APIs are still available and
            would work, but are planned for removal.  \n                            Changed
            API is : `Multi.transform().toHotStream()` -> `Multi.toHotStream()`\n
            \                           "
          link:
          - value: ""
            title: Quarkus - Migration Guide 1.12
            href: https://github.com/quarkusio/quarkus/wiki/Migration-Guide-1.12#mutiny
          quickfix:
          - replacement: .toHotStream(
            search: .transform().toHotStream(
            type: REPLACE
            name: toHotStream
          title: Method Multi.transform().toHotStream() deprecated
          category-id: potential
          effort: 1
        over: methods3
  - when:
      javaclass:
      - location:
        - IMPORT
        references: io.smallrye.mutiny.Multi
        as: files4
      filecontent:
      - from: files4
        pattern: '{*}.subscribeOn{*}'
        as: methods4
    perform:
      iteration:
      - when:
          not:
          - {}
        perform:
          hint:
          - message: "\n                                \n                                Mutiny
              has removed this method (deprecated for 11 months): `Multi.subscribeOn`
              -> `Multi.runSubscriptionOn()`\n                                "
            link:
            - value: ""
              title: Quarkus - Migration Guide 1.12
              href: https://github.com/quarkusio/quarkus/wiki/Migration-Guide-1.12#mutiny
            quickfix:
            - replacement: .runSubscriptionOn(
              search: .subscribeOn(
              type: REPLACE
              name: subscribeOn
            title: Method subscribeOn() removed
            category-id: mandatory
            effort: 1
        over: methods4
  - when:
      javaclass:
      - location:
        - IMPORT
        references: io.smallrye.mutiny.Uni
        as: files5
      filecontent:
      - from: files5
        pattern: '{*}.subscribeOn{*}'
        as: methods5
    perform:
      iteration:
      - when:
          not:
          - {}
        perform:
          hint:
          - message: "\n                                \n                                Mutiny
              has removed this method (deprecated for 11 months): `Uni.subscribeOn`
              -> `Uni.runSubscriptionOn()`\n                                "
            link:
            - value: ""
              title: Quarkus - Migration Guide 1.12
              href: https://github.com/quarkusio/quarkus/wiki/Migration-Guide-1.12#mutiny
            quickfix:
            - replacement: .runSubscriptionOn(
              search: .subscribeOn(
              type: REPLACE
              name: subscribeOn
            title: Method subscribeOn() removed
            category-id: mandatory
            effort: 1
        over: methods5
  - when:
      javaclass:
      - location:
        - IMPORT
        references: io.smallrye.mutiny.Multi
        as: files6
      filecontent:
      - from: files6
        pattern: '{*}.byTakingFirstItems{*}'
        as: methods6
    perform:
      iteration:
      - hint:
        - message: "\n                        \n                        Mutiny has
            deprecated a few APIs. The deprecated APIs are still available and would
            work, but are planned for removal.  \n                        Changed
            API is : `Multi.transform().byTakingFirstItems(long)` -> `Multi.select().first(long)`\n
            \                       "
          link:
          - value: ""
            title: Quarkus - Migration Guide 1.12
            href: https://github.com/quarkusio/quarkus/wiki/Migration-Guide-1.12#mutiny
          title: Methods byTakingFirstItems has been deprecated
          category-id: potential
          effort: 1
        over: methods6
  - when:
      javaclass:
      - location:
        - IMPORT
        references: io.smallrye.mutiny.Multi
        as: files6
      filecontent:
      - from: files6
        pattern: '{*}.byTestingItemsWith{*}'
        as: methods6
    perform:
      iteration:
      - hint:
        - message: "\n                        \n                        Mutiny has
            deprecated a few APIs. The deprecated APIs are still available and would
            work, but are planned for removal.  \n                        Changed
            API is : `Multi.transform().byTestingItemsWith(Function<T, Uni<?>>)` ->
            `Multi.select().when(Function<T, Uni<?>>)`\n                        "
          link:
          - value: ""
            title: Quarkus - Migration Guide 1.12
            href: https://github.com/quarkusio/quarkus/wiki/Migration-Guide-1.12#mutiny
          title: Method byTestingItemsWith has been deprecated
          category-id: potential
          effort: 1
        over: methods6
  - when:
      javaclass:
      - location:
        - IMPORT
        references: io.smallrye.mutiny.Multi
        as: files6
      filecontent:
      - from: files6
        pattern: '{*}.byFilteringItemsWith{*}'
        as: methods6
    perform:
      iteration:
      - hint:
        - message: "\n                        \n                        Mutiny has
            deprecated a few APIs. The deprecated APIs are still available and would
            work, but are planned for removal.  \n                        Changed
            API is : `Multi.transform().byFilteringItemsWith(Predicate<T>)` -> `Multi.select().where(Predicate<T>)`\n
            \                       "
          link:
          - value: ""
            title: Quarkus - Migration Guide 1.12
            href: https://github.com/quarkusio/quarkus/wiki/Migration-Guide-1.12#mutiny
          title: Method byFilteringItemsWith has been deprecated
          category-id: potential
          effort: 1
        over: methods6
  - when:
      javaclass:
      - location:
        - IMPORT
        references: io.smallrye.mutiny.Multi
        as: files6
      filecontent:
      - from: files6
        pattern: '{*}.bySkippingFirstItems{*}'
        as: methods6
    perform:
      iteration:
      - hint:
        - message: "\n                        \n                        Mutiny has
            deprecated a few APIs. The deprecated APIs are still available and would
            work, but are planned for removal.  \n                        Changed
            API is : `Multi.transform().bySkippingFirstItems(long)` -> `Multi.skip().first(long)`\n
            \                       "
          link:
          - value: ""
            title: Quarkus - Migration Guide 1.12
            href: https://github.com/quarkusio/quarkus/wiki/Migration-Guide-1.12#mutiny
          title: Method bySkippingFirstItems has been deprecated
          category-id: potential
          effort: 1
        over: methods6
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-archived/quarkus1/quarkus1-11/quarkus1-12-mutiny.windup.xml
