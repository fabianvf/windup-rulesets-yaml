metadata:
- description: "\n            Any usage of the file system on the application server
    will require reconfiguration or, in rare cases, architectural changes.\n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-xml,3.0.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,2.4.0.Final
  sourceTechnology:
  - id: eap
    versionRange: '[7,8)'
  - id: springboot
  targetTechnology:
  - id: azure-appservice
  - id: azure-aks
  - id: azure-container-apps
  tag:
  - file-system
rules:
  rule:
  - when:
      or:
      - javaclass:
        - references: java.io.{*}
        - references: java.nio.{*}
        - references: org.apache.commons.io.{*}
    perform:
      hint:
      - message: "\n                        \n                        The application
          uses Java APIs to read/write from the file system.\n                        \n
          \                       Any usage of the file system on the application
          will require reconfiguration or, in rare cases, architectural changes.\n
          \                       \n                    "
        link:
        - value: ""
          title: Java APIs found in the application to read/write from the file system
          href: https://docs.microsoft.com/azure/developer/java/migration/migrate-spring-boot-to-app-service#determine-whether-and-how-the-file-system-is-used
        - value: ""
          title: Azure Spring Boot Starter for Azure Storage
          href: https://search.maven.org/artifact/com.azure.spring/azure-spring-boot-starter-storage
        title: The application uses Java APIs to read/write from the file system
        category-id: optional
        effort: 5
  - when:
      filecontent:
      - pattern: '{path}'
        filename: '{*}.{extensions}'
    perform:
      hint:
      - message: "\n                        \n                        Relative path
          found.\n                        \n                        Any usage of the
          file system on the application will require reconfiguration or, in rare
          cases, architectural changes.\n                        \n                    "
        link:
        - value: ""
          title: Relative path found in the application
          href: https://docs.microsoft.com/azure/developer/java/migration/migrate-spring-boot-to-app-service#determine-whether-and-how-the-file-system-is-used
        title: Relative path found
        category-id: optional
        effort: 5
    where:
    - matches:
      - value: ""
        pattern: (java|properties|yaml|yml)
      param: extensions
    - matches:
      - value: ""
        pattern: \.\/.
      param: path
  - when:
      filecontent:
      - pattern: '{path}'
        filename: '{*}.{extensions}'
    perform:
      hint:
      - message: "\n                        \n                        Home path found.\n
          \                       \n                        Any usage of the file
          system on the application will require reconfiguration or, in rare cases,
          architectural changes.\n                        \n                    "
        link:
        - value: ""
          title: Home path found in the application
          href: https://docs.microsoft.com/azure/developer/java/migration/migrate-spring-boot-to-app-service#determine-whether-and-how-the-file-system-is-used
        title: Home path found
        category-id: optional
        effort: 5
    where:
    - matches:
      - value: ""
        pattern: (java|properties|yaml|yml)
      param: extensions
    - matches:
      - value: ""
        pattern: \/home
      param: path
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/azure/azure-file-system.windup.xml
