metadata:
- description: "\n            This ruleset provides analysis in both JBoss EAP 4 and
    5\n            that may require individual attention when migrating to JBoss EAP
    6 and 7.\n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-javaee,3.0.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,3.0.0.Final
  sourceTechnology:
  - id: eap
    versionRange: '[4,6)'
  targetTechnology:
  - id: eap
    versionRange: '[6,8)'
rules:
  rule:
  - when:
      javaclass:
      - location:
        - ANNOTATION
        references: org.jboss.security.annotation.SecurityDomain
    perform:
      hint:
      - message: "\n                        \n                        Annotation `org.jboss.security.annotation.SecurityDomain`
          should be replaced by `org.jboss.ejb3.annotation.SecurityDomain`.\n                        \n
          \                   "
        link:
        - value: ""
          title: JBoss EAP 6 - Development Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/development_guide/#Use_a_Security_Domain_in_Your_Application
        - value: ""
          title: How to configure EJB3 Domain Security in JBoss EAP 6
          href: https://access.redhat.com/solutions/236113
        title: Replace org.jboss.security.annotation.SecurityDomain annotation
        category-id: mandatory
        issue-display-mode: all
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.jboss.mx.util.MBeanProxyExt
    perform:
      hint:
      - message: "\n                        \n                        In JBoss EAP
          4 and 5 a lot of the mbean-related components were JBoss specific.  \n                        In
          JBoss EAP 6+ these mbean-related components (i.e., `org.jboss.mx.*`) have
          been removed in an effort to make the container more Java EE 6 specification
          compliant.  \n                        One will need to find an equivalent
          replacement: for class `MBeanProxyExt.create()` one can use `JMX.newMBeanProxy()`.\n
          \                       \n                    "
        link:
        - value: ""
          title: Where is class MBeanProxyExt in JBoss EAP 6?
          href: https://access.redhat.com/solutions/410503
        - value: ""
          title: Java EE 6 - Class JMX
          href: https://docs.oracle.com/javase/6/docs/api/javax/management/JMX.html
        title: Replace org.jboss.mx.util.MBeanProxyExt class
        category-id: mandatory
        issue-display-mode: all
        effort: 3
  - when:
      javaclass:
      - location:
        - INHERITANCE
        references: org.jboss.system.{classes}
    perform:
      hint:
      - message: "\n                        \n                        JMX / MBeans
          is still fully supported as it is in the JDK specification.  \n                        If
          your MBeans were extending the old JBoss EAP MBean support classes such
          as `org.jboss.system.ServiceMBean` and `org.jboss.system.ServiceMBeanSupport`,
          these do not exist in JBoss EAP 6+.  \n                        These classes
          were hooked into the kernel in previous versions of JBoss EAP where everything
          was basically turned into an MBean.  \n                        \n                    "
        link:
        - value: ""
          title: How to implement MBeans in JBoss EAP 6
          href: https://access.redhat.com/solutions/121823
        title: Replace ServiceMBean and ServiceMBeanSupport
        category-id: mandatory
        issue-display-mode: all
        effort: 1
    where:
    - matches:
      - value: ""
        pattern: (ServiceMBean|ServiceMBeanSupport)
      param: classes
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/eap4and5/jboss-eap4and5to6and7-java.windup.xml
