metadata:
- description: "\n            This ruleset provides analysis of JBoss EAP 5 JAVA source
    files that may require individual attention when migrating to JBoss EAP 7+.\n
    \       "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-javaee,2.3.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,2.3.0.Final
  sourceTechnology:
  - id: eap
    versionRange: '[4,6)'
  targetTechnology:
  - id: eap
    versionRange: '[7,)'
  tag:
  - jboss-eap5
  - jms
  - ejb
rules:
  rule:
  - when:
      javaclass:
      - location:
        - FIELD_DECLARATION
        - VARIABLE_DECLARATION
        references: javax.jms.QueueConnectionFactory
    perform:
      hint:
      - message: "\n                      \n                      `QueueConnectionFactory`
          was used to obtain connection to JMS queues.\n\n                      Replace
          the lookup string `QueueConnectionFactory` with `ConnectionFactory`.\n                      \n
          \                   "
        link:
        - value: ""
          title: JBoss EAP 7 - Basic Messaging Configuration
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html/configuring_messaging/getting_started#connection_factories
        - value: ""
          title: JBoss EAP 7 - Configuring Connection Factories
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html/configuring_messaging/configuring_messaging_connection_factories
        - value: ""
          title: JavaEE 7 - JMS APIs
          href: https://docs.oracle.com/javaee/7/api/javax/jms/package-summary.html#package.description
        tag:
        - jms
        title: JMS legacy javax.jms.QueueConnectionFactory
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - ANNOTATION
        references: org.jboss.annotation.ejb.Service
    perform:
      hint:
      - message: "\n                        The purpose of `@Service` annotation was
          to achieve @Singleton like behavior.\n                        It was deprecated
          with the release of JBoss AS 6 and removed from JBoss EAP 6.\n\n                        Use
          the Java EE 6 `javax.ejb.Singleton` annotation instead.\n                    "
        link:
        - value: ""
          title: JBoss EJB 3.0 extensions
          href: https://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/jboss_extensions.html
        - value: ""
          title: JBoss EJB 3.0 Javadoc
          href: https://docs.jboss.org/ejb3/embedded/api/org/jboss/annotation/ejb/package-summary.html
        - value: ""
          title: Java EE API for @Singleton
          href: http://docs.oracle.com/javaee/7/api/javax/ejb/Singleton.html
        - value: ""
          title: How to expose a JavaEE 6 Singleton as a MBean in JMX in JBoss EAP
          href: https://access.redhat.com/solutions/199863
        - value: ""
          title: How to use @Service and @Management annotations in JBoss EAP
          href: https://access.redhat.com/solutions/196713
        tag:
        - ejb
        quickfix:
        - replacement: javax.ejb.Singleton
          search: org.jboss.annotation.ejb.Service
          type: REPLACE
          name: ejbService-qf
        title: JBoss EJB @Service annotation
        category-id: mandatory
        effort: 3
  - when:
      or:
      - javaclass:
        - location:
          - ANNOTATION
          references: org.jboss.annotation.ejb.Management
        - location:
          - ANNOTATION
          references: org.jboss.ejb3.annotation.Management
    perform:
      hint:
      - message: "\n                        The `@Management` annotation is one of
          JBoss EJB 3.0 extension which wraps the bean\n                        as
          an MBean and registers it in the JBoss MBean Server automatically.\n                        JBoss
          EAP 6+ no longer supports the @Management annotations.\n\n                        The
          Solution is to create a simple MBean using the Java EE 6 `@Singleton` and
          `@Startup` to register itself in JMX Server.\n\n                        Create
          your `@Singleton` MBean implementation which implements your service interface.
          Use `@PostConstruct` to have your Singleton register itself in the JMX MBean
          Server and then use `@PreDestroy` to unregister your MBean from the JMX
          Server.\n                    "
        link:
        - value: ""
          title: JBoss EJB 3.0 extensions
          href: https://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/jboss_extensions.html
        - value: ""
          title: JBoss EJB 3.0 Javadoc
          href: https://docs.jboss.org/ejb3/embedded/api/org/jboss/annotation/ejb/package-summary.html
        - value: ""
          title: How to expose a JavaEE 6 Singleton as a MBean in JMX in JBoss EAP
          href: https://access.redhat.com/solutions/199863
        - value: ""
          title: Java API - Annotation Type Startup
          href: http://docs.oracle.com/javaee/7/api/javax/ejb/Startup.html
        tag:
        - ejb
        - jmx
        - singleton
        quickfix:
        - replacement: javax.ejb.Startup
          search: org.jboss.ejb3.annotation.Management
          type: REPLACE
          name: ejbManagement-qf
        title: JBoss EJB @Management annotation
        category-id: mandatory
        effort: 3
  - when:
      javaclass:
      - location:
        - ANNOTATION
        - IMPORT
        references: org.jboss.annotation.ejb.LocalBinding
    perform:
      hint:
      - message: "\n                        The `@LocalBinding` annotation is one
          of JBoss EJB 3.0 extensions\n                        which specifies the
          local jndi binding for an EJB local interface.\n                        Use
          `@EJB(lookup=\"your_jndi\")` instead.\n                    "
        link:
        - value: ""
          title: JBoss EJB 3.0 extensions
          href: https://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/jboss_extensions.html
        - value: ""
          title: JBoss EJB 3.0 Javadoc
          href: https://docs.jboss.org/ejb3/embedded/api/org/jboss/annotation/ejb/package-summary.html
        - value: ""
          title: EJB annotation with lookup
          href: https://docs.oracle.com/javaee/7/api/javax/ejb/EJB.html#lookup--
        tag:
        - ejb
        quickfix:
        - search: org.jboss.annotation.ejb.LocalBinding
          type: DELETE_LINE
          name: LocalBinding1
        - replacement: '@LocalBinding(jndiBinding='
          search: '@EJB(lookup='
          type: REPLACE
          name: LocalBinding2
        title: org.jboss.annotation.ejb.LocalBinding
        category-id: mandatory
        effort: 3
  - when:
      javaclass:
      - location:
        - ANNOTATION
        references: org.jboss.annotation.ejb.Depends
    perform:
      hint:
      - message: "\n                        The `@Depends` annotation is one of JBoss
          EJB 3.0 extensions\n                        which specifies a deployment
          dependency for a bean.\n                        Validate that a JBoss EAP
          6 Dependency exists.\n                    "
        link:
        - value: ""
          title: JBoss EJB 3.0 extensions
          href: https://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/jboss_extensions.html
        - value: ""
          title: JBoss EJB 3.0 Javadoc
          href: https://docs.jboss.org/ejb3/embedded/api/org/jboss/annotation/ejb/package-summary.html
        tag:
        - ejb
        title: org.jboss.annotation.ejb.Depends
        category-id: mandatory
        effort: 3
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.annotation.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.api.annotation`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.annotation has been moved to org.jboss.ws.api.annotation
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.binding.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.api.binding`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.binding has been moved to org.jboss.ws.api.binding
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.management.recording.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.api.monitoring`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.management.recording has been moved to org.jboss.ws.api.monitoring
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.tools.ant.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.tools.ant`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.tools.ant has been moved to org.jboss.ws.tools.ant
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.tools.cmd.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.tools.cmd`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.tools.cmd has been moved to org.jboss.ws.tools.cmd
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.tools.{*}
    perform:
      iteration:
      - when:
          not:
          - {}
        hint:
        - message: "\n                            This package has been relocated
            to `org.jboss.ws.api.tools` as specified in the\n                            migration
            guide.\n                        "
          link:
          - value: ""
            title: EAP 6 Migration Guide
            href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
          tag:
          - jbossws
          title: org.jboss.wsf.spi.tools has been moved to org.jboss.ws.api.tools
          category-id: mandatory
          effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.util.ServiceLoader
    perform:
      hint:
      - message: "\n                        This class has been relocated to `org.jboss.ws.api.util.ServiceLoader`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.util.ServiceLoader has been moved to org.jboss.ws.api.util.ServiceLoader
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.common.handler.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.api.handler`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.common.handler has been moved to org.jboss.ws.api.handler
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.common.addressing.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.api.addressing`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.common.addressing has been moved to org.jboss.ws.api.addressing
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.common.DOMUtils
    perform:
      hint:
      - message: "\n                        This class has been relocated to `org.jboss.ws.api.util.DOMUtils`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.common.DOMUtils has been moved to org.jboss.ws.api.util.DOMUtils
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.common.{*}
    perform:
      iteration:
      - when:
          not:
          - {}
        hint:
        - message: "\n                            This package has been relocated
            to `org.jboss.ws.common` as specified in the\n                            migration
            guide.\n                        "
          link:
          - value: ""
            title: EAP 6 Migration Guide
            href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
          tag:
          - jbossws
          title: org.jboss.wsf.common has been moved to org.jboss.ws.common
          category-id: mandatory
          effort: 1
  - when:
      javaclass:
      - references: org.jboss.ws.annotation.EndpointConfig
    perform:
      hint:
      - message: "\n                        This class has been relocated to `org.jboss.ws.api.annotation.EndpointConfig`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.ws.annotation.EndpointConfig has been moved to org.jboss.ws.api.annotation.EndpointConfig
        category-id: mandatory
        effort: 1
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/eap5/jboss-eap5-7-java.windup.xml
