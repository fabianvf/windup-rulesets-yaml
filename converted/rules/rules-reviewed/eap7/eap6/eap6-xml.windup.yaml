metadata:
- description: "\n            This ruleset provides analysis of JBoss 6 XML descriptors
    and specific application parameters\n            which needs to be replaced by
    some alternative configuration when migrating to JBoss EAP 7+.\n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-xml,2.3.0.Final
  sourceTechnology:
  - id: eap
    versionRange: '[6,7)'
  targetTechnology:
  - id: eap
    versionRange: '[7,)'
  tag:
  - configuration
rules:
  rule:
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: msg
          uri: urn:jboss:messaging-deployment:1.0
        matches: /msg:messaging-deployment
        in: '{*}-jms.xml'
    perform:
      classification:
      - description:
        - |2-

                                  The proprietary XML descriptors, previously used to setup JMS resources, are deprecated in EAP 7.
                                  An updated version of this file was generated using XSLT transformation.
        link:
        - value: ""
          title: JMS migration documentation
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migrate_messaging_application_jms_deployment_descriptors
        tag:
        - jms
        title: JMS proprietary resource definitions
        effort: 1
        category-id: mandatory
        issue-display-mode: all
      xslt:
      - title: JMS Resource Definition (MTA-generated)
        extension: -rhamt-generated.xml
        template: transformations/xslt/deprecated-jms-resources.xsl
  - when:
      or:
      - xmlfile:
        - matches: /*[local-name()='jboss-deployment-structure']/*[local-name()='deployment'
            or local-name()='sub-deployment' or local-name()='module']/*[local-name()='dependencies']
          in: jboss-deployment-structure.xml
    perform:
      iteration:
      - classification:
        - description:
          - Verify in advance that all the modules this application depends on still
            exist.
          link:
          - value: ""
            title: Migrate explicit module dependencies
            href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migrate_explicit_module_dependencies
          tag:
          - configuration
          title: JBoss deployment structure dependencies (jboss-deployment-structure.xml)
          effort: 1
          category-id: mandatory
          issue-display-mode: all
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/eap6/eap6-xml.windup.xml
