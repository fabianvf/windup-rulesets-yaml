metadata:
- description: "\n            This ruleset provides analysis of applications that
    use JAX-WS and may require\n            individual attention when migrating to
    JBoss EAP 7+.\n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-javaee,3.0.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,3.0.0.Final
  targetTechnology:
  - id: eap
    versionRange: '[7,)'
  tag:
  - jax-ws
rules:
  rule:
  - when:
      javaclass:
      - location:
        - INHERITANCE
        references: javax.xml.ws.Service
        as: step1
      - location:
        - METHOD
        references: '{*}(java.net.URL, javax.xml.namespace.QName)'
        as: step2
        from: step1
    perform:
      iteration:
      - when:
          not:
          - javaclass:
            - location:
              - METHOD
              references: '{*}(java.net.URL, javax.xml.namespace.QName, javax.xml.ws.WebServiceFeature{*})'
        perform:
          hint:
          - message: "\n                                \n                                EAP
              7 uses JAX-WS 2.2 style constructors with the `javax.xml.ws.WebServiceFeature`
              class to build clients that are injected into web service references
              (i.e. using the `@WebServiceRef` annotation).  \n                                This
              means that user provided service classes injected by the container must
              implement JAX-WS 2.2 or later.  \n                                The
              class must be changed to add the constructor [`Service(URL wsdlDocumentLocation,
              QName serviceName, WebServiceFeature... features)`](https://docs.oracle.com/javase/7/docs/api/javax/xml/ws/Service.html#Service&#40;java.net.URL,%20javax.xml.namespace.QName,%20javax.xml.ws.WebServiceFeature...&#41;)\n
              \                               \n                            "
            link:
            - value: ""
              title: JAX-WS 2.2 Requirements for WebServiceRef
              href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migrate_jax_ws_2_2_requirements_for_webserviceref
            tag:
            - jax-ws
            title: JAX-WS 2.2 Requirements for WebServiceRef
            category-id: mandatory
            effort: 1
        over: step2
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/eap6/jax-ws.windup.xml
