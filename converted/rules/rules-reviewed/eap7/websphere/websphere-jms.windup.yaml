metadata:
- description: "\n            This ruleset provides analysis of WebSphere proprietary
    classes and constructs that may require individual attention when\n            migrating
    to JBoss EAP 7+.\n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-javaee,2.7.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,2.7.0.Final
  sourceTechnology:
  - id: websphere
  targetTechnology:
  - id: eap
    versionRange: '[7,)'
  - id: java-ee
    versionRange: '[7,)'
  tag:
  - jms
  - websphere
rules:
  rule:
  - when:
      javaclass:
      - references: '{package}.{type}'
    perform:
      classification:
      - description:
        - "WebSphere MQ client API is used to communicate with the MQ server from
          client-side applications.\n                        For JBoss EAP 7, this
          needs to be replaced with standard Java EE 7 JMS API, or with ActiveMQ Artemis
          client API.\n                    "
        link:
        - value: ""
          title: Java EE 7 JMS Tutorial
          href: https://docs.oracle.com/javaee/7/tutorial/jms-concepts003.htm#BNCEH
        - value: ""
          title: ActiveMQ Artemis User Manual
          href: http://activemq.apache.org/artemis/docs/1.5.0/messaging-concepts.html
        - value: ""
          title: ActiveMQ Artemis Core Client API Javadoc
          href: http://activemq.apache.org/artemis/docs/javadocs/javadoc-1.5.0/org/apache/activemq/artemis/api/core/client/package-summary.html
        tag:
        - jms
        - websphere
        title: IBM JMS Client
        effort: 3
        category-id: mandatory
        issue-display-mode: all
    where:
    - matches:
      - value: ""
        pattern: com.ibm(\..*)?\.jms
      param: package
    - matches:
      - value: ""
        pattern: '[^.]+'
      param: type
  - when:
      javaclass:
      - references: '{package}.{prefix}{type}ConnectionFactory'
    perform:
      hint:
      - message: "\n                        IBM {prefix}{type}ConnectionFactory is
          a proprietary encapsulation of JMS servers to which Connections can be created
          for\n                        message distribution. This reference should
          be replaced with the Java EE standard API: `javax.jms.{type}ConnectionFactory`.\n
          \                   "
        link:
        - value: ""
          title: Java EE JMS Documentation
          href: https://docs.oracle.com/javaee/7/tutorial/jms-concepts003.htm#BNCEH
        tag:
        - jms
        - websphere
        title: IBM {prefix}{type}ConnectionFactory reference
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - value: ""
        pattern: com.ibm(\.[^.]*)*\.jms
      param: package
    - matches:
      - value: ""
        pattern: (Jms|MQeJNDI|MQe|MQ)?+
      param: prefix
    - matches:
      - value: ""
        pattern: '[^.]*?'
      param: type
  - when:
      javaclass:
      - references: '{package}.JmsMsg{type}'
    perform:
      hint:
      - message: "\n                        IBM JMS API {type}s are used for sending/reading
          messages to/from a topic or queue. This reference should be\n                        replaced
          with the Java EE standard API `javax.jms.Message{type}`.\n                    "
        link:
        - value: ""
          title: Java EE JMS Documentation
          href: https://docs.oracle.com/javaee/7/tutorial/jms-concepts003.htm#BNCEH
        tag:
        - jms
        - websphere
        title: IBM JMS topic/queue message
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - value: ""
        pattern: com.ibm(\..*)?\.jms
      param: package
    - matches:
      - value: ""
        pattern: (Producer|Consumer)
      param: type
  - when:
      javaclass:
      - references: com.ibm.mqe.jms.{type}Queue
    perform:
      hint:
      - message: "\n                        `MQe{type}Queue` is a WebSphere implementation
          of a JMS `Queue` and should be migrated to\n                        the
          Java EE 6 JMS standard interface `javax.jms.Queue`.\n                    "
        link:
        - value: ""
          title: Java EE 7 JMS Tutorial
          href: https://docs.oracle.com/javaee/7/tutorial/jms-concepts003.htm#BNCEH
        tag:
        - jms
        - websphere
        title: WebSphere implementation MQe{type}Queue of JMS Queue
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: '{package}.{prefix}{type}Message'
    perform:
      iteration:
      - when:
          not:
          - {}
        perform:
          hint:
          - message: "\n                                JMS `{package}.{prefix}{type}Message`
              messages represent the actual data passed through JMS destinations.
              This reference should be\n                                replaced with
              the Java EE standard API `javax.jms.{type}Message`.\n                            "
            link:
            - value: ""
              title: Java EE 7 JMS Tutorial - Message API
              href: https://docs.oracle.com/javaee/7/tutorial/jms-concepts003.htm#sthref2271
            tag:
            - jms
            - websphere
            title: IBM JMS destination message
            category-id: mandatory
            effort: 1
    where:
    - matches:
      - value: ""
        pattern: (Text|Stream|Object|Map|Bytes)?
      param: type
    - matches:
      - value: ""
        pattern: (JMS|MQe|MQ)
      param: prefix
    - matches:
      - value: ""
        pattern: com.ibm(\..*)?\.jms
      param: package
  - when:
      javaclass:
      - references: '{package}.{prefix}{type}'
    perform:
      iteration:
      - when:
          not:
          - {}
        perform:
          hint:
          - message: '`{package}.{prefix}{type}` is an IBM proprietary interface and
              needs to be migrated to the Java EE standard API `javax.jms.{type}`.'
            link:
            - value: ""
              title: Java EE JMS Documentation
              href: https://docs.oracle.com/javaee/7/tutorial/jms-concepts003.htm#BNCEH
            tag:
            - jms
            - websphere
            title: IBM JMS interface
            category-id: mandatory
            effort: 1
    where:
    - matches:
      - value: ""
        pattern: com.ibm(\..*)?\.jms
      param: package
    - matches:
      - value: ""
        pattern: (Jms|MQe|MQ)
      param: prefix
    - matches:
      - value: ""
        pattern: '[^.]+'
      param: type
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/websphere/websphere-jms.windup.xml
