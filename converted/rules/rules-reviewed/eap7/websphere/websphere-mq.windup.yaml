metadata:
- description: "\n            Provides analysis of WebSphere MQ proprietary classes
    and configuration that may require individual attention when migrating to\n            JBoss
    EAP 7+.\n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-javaee,2.3.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,2.3.0.Final
  sourceTechnology:
  - id: websphere
  targetTechnology:
  - id: eap
    versionRange: '[7,)'
  - id: java-ee
    versionRange: '[7,)'
  tag:
  - jms
  - messaging
  - websphere
rules:
  rule:
  - when:
      javaclass:
      - references: '{package}.{type}'
    perform:
      classification:
      - description:
        - "WebSphere MQ client API is used to communicate with the MQ server from
          client-side applications.\n                        For JBoss EAP 7, this
          needs to be replaced with standard Java EE 6 JMS API, or with ActiveMQ Artemis
          client API.\n                    "
        link:
        - value: ""
          title: Java EE 7 JMS Tutorial
          href: https://docs.oracle.com/javaee/7/tutorial/jms-concepts003.htm#BNCEH
        - value: ""
          title: WebSphere MQ JavaDoc
          href: http://www-01.ibm.com/support/knowledgecenter/SSVHEW_6.2.0/com.ibm.mqe.javadoc/java/overview-summary.html
        tag:
        - jms
        - websphere
        title: IBM MQ client API
        effort: 3
        category-id: mandatory
        issue-display-mode: all
    where:
    - matches:
      - value: ""
        pattern: com.ibm(\..*)?\.(mq|wmq).*
      param: package
    - matches:
      - value: ""
        pattern: '[^.]+'
      param: type
  - when:
      filecontent:
      - pattern: com.ibm.mq.jms.context.WMQInitialContextFactory
        filename: '{*}.{ext}'
    perform:
      classification:
      - description:
        - "The WebSphere MQ client API is used to communicate with the MQ server from
          client-side applications.\n                        For JBoss EAP 7, this
          needs to be replaced with standard Java EE 7 JMS API, or with ActiveMQ Artemis
          client API.\n                    "
        title: IBM MQ Configuration
        issue-display-mode: detail-only
      hint:
      - message: "`WMQInitialContextFactory` is an implementation of `InitialContextFactory`\n
          \                       used to get object instances from JNDI. The\n                        equivalent
          functionality needs to be configured on JBoss EAP 7 using ActiveMQ Artemis.\n
          \                       `InitialContextFactory` is provided\n                        by
          EAP and you only need to instantiate `InitialContext ctx = new InitialContext();`.\n
          \                   "
        link:
        - value: ""
          title: The Embedded ActiveMQ Artemis Messaging Broker
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/configuring_messaging/#the_integrated_activemq_artemis_messaging_broker
        - value: ""
          title: Java EE 7 JMS Tutorial
          href: https://docs.oracle.com/javaee/7/tutorial/jms-concepts003.htm#BNCEH
        tag:
        - jms
        - messaging
        - configuration
        - websphere
        title: IBM JMS implementation of WMQInitialContextFactory
        category-id: mandatory
        effort: 3
    where:
    - matches:
      - value: ""
        pattern: (java|properties|xml)
      param: ext
  - when:
      filecontent:
      - pattern: '{*}'
        filename: '{*}.scp'
    perform:
      classification:
      - title: IBM MQ Configuration
        issue-display-mode: detail-only
      hint:
      - message: "\n                        WebSphere `.scp` files contain scripts
          for the `jmsadmin` program which is used\n                        to configure
          the WebSphere MQ destinations\n                        and routing. To configure
          messaging in JBoss EAP 7 with ActiveMQ Artemis, use either the Management
          Console or Management CLI with it's\n                        scripting feature.\n
          \                   "
        link:
        - value: ""
          title: Configuring Single-Node Messaging Systems
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/configuring_messaging/#basic_configuration
        - value: ""
          title: Java EE 7 JMS Tutorial
          href: https://docs.oracle.com/javaee/7/tutorial/jms-concepts003.htm#BNCEH
        tag:
        - jms
        - messaging
        - configuration
        - websphere
        title: IBM WebSphere .scp file
        category-id: mandatory
        effort: 3
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/websphere/websphere-mq.windup.xml
