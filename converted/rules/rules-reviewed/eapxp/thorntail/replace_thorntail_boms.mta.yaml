metadata:
- description: "\n            This ruleset provides analysis of Maven built applications
    that use Thorntail BOMs to manage dependencies,\n            which should be replaced
    by JBoss EAP XP and/or JBoss EAP BOMs, when migrating to JBoss EAP XP.\n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-javaee,3.0.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,3.0.0.Final
    - id: org.jboss.windup.rules,windup-rules-xml,3.0.0.Final
  sourceTechnology:
  - id: thorntail
  targetTechnology:
  - id: eapxp
    versionRange: '[2,)'
  tag:
  - JBossEAP
  - Thorntail
rules:
  rule:
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: m
          uri: http://maven.apache.org/POM/4.0.0
        matches: /m:project/m:dependencyManagement/m:dependencies/m:dependency[m:groupId/text()
          = 'io.thorntail' and m:artifactId/text() = 'bom']
        in: pom.xml
    perform:
      hint:
      - message: If you migrate your application to JBoss EAP XP 2.0 (or later), and
          want to ensure its Maven building, running or testing works as expected,
          replace Thorntail BOM `io.thorntail:bom` with JBoss EAP XP MicroProfile
          BOM and/or JBoss EAP Jakarta EE BOM.
        link:
        - value: ""
          title: 'Red Hat JBoss EAP XP Migration Guide: Thorntail Application Maven
            Project Migration'
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.4/html/jboss_eap_xp_upgrade_and_migration_guide/thorntail-application-maven-project-migration_default#migrating-a-thorntail-application-maven-project-into-eap-xp_default
        tag:
        - Thorntail
        title: Replace Thorntail BOMs - io.thorntail:bom
        category-id: potential
        effort: 1
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: m
          uri: http://maven.apache.org/POM/4.0.0
        matches: /m:project/m:dependencyManagement/m:dependencies/m:dependency[m:groupId/text()
          = 'io.thorntail' and m:artifactId/text() = 'bom-certified']
        in: pom.xml
    perform:
      hint:
      - message: If you migrate your application to JBoss EAP XP 2.0 (or later), and
          want to ensure its Maven building, running or testing works as expected,
          replace Thorntail BOM `io.thorntail:bom-certified` with JBoss EAP XP MicroProfile
          BOM and/or JBoss EAP Jakarta EE BOM.
        link:
        - value: ""
          title: 'Red Hat JBoss EAP XP Migration Guide: Thorntail Application Maven
            Project Migration'
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.4/html/jboss_eap_xp_upgrade_and_migration_guide/thorntail-application-maven-project-migration_default#migrating-a-thorntail-application-maven-project-into-eap-xp_default
        tag:
        - Thorntail
        title: Replace Thorntail BOMs - io.thorntail:bom-certified
        category-id: potential
        effort: 1
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eapxp/thorntail/replace_thorntail_boms.mta.xml
